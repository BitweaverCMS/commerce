<!--
// +----------------------------------------------------------------------+
// |zen-cart Open Source E-commerce                                       |
// +----------------------------------------------------------------------+
// | Copyright (c) 2004 The zen-cart developers                           |
// |                                                                      |
// | http://www.zen-cart.com/index.php                                    |
// |                                                                      |
// | Portions may be Copyright (c) 2003 osCommerce                        |
// +----------------------------------------------------------------------+
// | This source file is subject to version 2.0 of the GPL license,       |
// | that is bundled with this package in the file LICENSE, and is        |
// | available through the world-wide-web at the following url:           |
// | http://www.zen-cart.com/license/2_0.txt.                             |
// | If you did not receive a copy of the zen-cart license and are unable |
// | to obtain it through the world-wide-web, please send a note to       |
// | license@zen-cart.com so we can mail you a copy immediately.          |
// +----------------------------------------------------------------------+
// $Id: read_me_onload.html,v 1.1 2005/07/05 05:58:55 bitweaver Exp $
//-->
<html>
<style type="text/css">
<!--
.style1 {color: #CC0000}
.style2 {color: #0033FF}
-->
</style>
<title>OnLoad() Overrides in Zen Cart</title>
<h2><strong>On_Load Override How-To</strong> </h2>
<p><em>Another example of Zen Magic.</em><br />
<br />
Any <span class="style1">on_load.js</span> file in this directory can be used to 
modify the body tag with a javascript <code>on_load()</code> function.<br />
<br />
For site-wide operation, just name the file "<code><span class="style1">on_load.js</span></code>" and store it in this folder. Multiple files may be present, and can be entered by adding an underscore and more letters to the filename.<br />
<br />
For page-specific operation, put the file under the <code>/includes/modules/pages/{pagename}/</code> folder. <br />
<br />
NOTE: <span class="style1">on_load_*.js</span> files must contain ONLY the raw code to be inserted in the <code>&lt;body&gt;</code> tag in the <code>on_load=""</code> parameter.<br />
<br />
The effect is like this:<br />
<code>&lt;body onload=&quot;WHATEVER_YOUR_FILE_CONTAINS_GOES_HERE&quot;&gt;</code><br />
Essentially, the contents of the file will be a function call to the DOM or to functions loaded in a jscript file. <br />

<br />
<strong>OVERRIDE Operation:</strong><br />
1. Checks the existence of "on_load" scripts for the <strong>individual page</strong> first <br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Looks in "<code>/includes/modules/pages/<span class="style2">{PAGENAME}</span>/</code>" for files named "<span class="style1">on_load_*.js</span>"<br />
2. Then checks for site-wide overrides in "<code>includes/templates/<span class="style2">TEMPLATE</span>/jscript/on_load/<span class="style1">on_load_*.js</span></code>"<br />
<h2>EXAMPLES</h2>
<strong>EXAMPLE ONE (per-page on_load coding):</strong><br />
Two live examples of this exist for the &quot;login&quot; and &quot;contact us&quot; pages in Zen Cart.<br /> 
Let's look at the login page: <br />
You'll see that in /includes/modules/pages/login/on_load_main.js the code that is inserted into the &lt;body&gt; tag for that page is this:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="style2">document.getElementById('email_address').focus();</code><br />
This is a DOM call to set focus on the &quot;email_address&quot; field on the page as the first spot where the cursor will be flashing when the page is opened.<br />
When the login page is loaded, the &lt;body&gt; tag will read like this:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>&lt;body id=&quot;login&quot; onload=&quot;document.getElementById('email_address').focus();&quot;&gt; </code><br />
<br />
<strong>EXAMPLE TWO (on_load calls on all pages in your shop):</strong><br /> 
Sometimes a designer wishes to preload rollover images on the page for menu purposes. In this case, the implementation is two-fold:<br />
1. Create a file with javascript function definitions for the preload activities, and place it in:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>includes/templates/<span class="style2">{template_directory}</span>/jscript/jscript_preloadimages.js</code><br />
2. Create a file for the onload code as:<br /> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>includes/templates/<span class="style2">{template_directory}</span>/jscript/on_load/on_load_image_preload.js</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;and in the file put just one function call to match the preload function definition in your js file, such as:<br /> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>preloadImages();</code><br />
3. Of course, be sure to upload the real image files, etc to support the preload activities. </p>
<br />
